(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(n){if(n.ep)return;n.ep=!0;const t=r(n);fetch(n.href,t)}})();const b="d5763f6ad57aeab7c0f91e5f77a6c825";document.getElementById("arrow");const O=document.getElementById("wind-speed"),W=document.getElementById("location"),y=document.getElementById("temperature"),P=document.getElementById("temperature_min"),N=document.getElementById("temperature_max"),z=document.getElementById("temperature_feels_like"),A=document.getElementById("description"),G=document.getElementById("icon"),i=document.getElementById("city"),v=document.querySelector(".container_weather__main-info"),x=document.querySelector(".container_weather__add-info"),c=document.getElementById("error-container");document.getElementById("container_advice");function U(e){const s=["север","северо-восток","восток","юго-восток","юг","юго-запад","запад","северо-запад"],r=Math.round(e/45);return s[r%8]}function R(e,s){const r=(e+360)%360,o=U(r);O.textContent=`${Math.round(s)} км/ч`,console.log(`Ветер идет с направления: ${o}`),arrow.style.transform=`translate(-50%, -100%) rotate(${r+180}deg)`}async function w(){try{const e=await new Promise((o,n)=>{navigator.geolocation.getCurrentPosition(t=>o(t),t=>n(t))}),{latitude:s,longitude:r}=e.coords;return{latitude:s,longitude:r}}catch(e){throw console.error("Ошибка при получении местоположения:",e),e}}async function T(e){try{const s=e.dt,r=e.sys.sunrise,o=e.sys.sunset,n=new Date(s*1e3),t=new Date(r*1e3),a=new Date(o*1e3),l=n.getHours(),p=t.getHours(),g=a.getHours();return l<p||l>g}catch(s){return console.error("Ошибка при определении времени суток:",s.message),!1}}async function k(e){try{if(console.log("Данные о погоде:",e),!e||!e.weather||!e.weather[0]||!e.sys||!e.sys.sunrise||!e.sys.sunset){console.error("Некорректные данные о погоде: отсутствуют необходимые свойства");return}const r=e.weather[0].description,o=await T(e);if(!r){console.error("Некорректные данные о погоде: отсутствует описание погоды");return}const n=document.body;let t;if(o)switch(r){case"пасмурно":t="assets/images/weather/cloudy/clouds_road.jfif";break;case"переменная облачность":t="assets/images/weather/clear/few_clouds2_night.jpg";break;case"небольшая облачность":t="assets/images/weather/cloudy/night_clouds.jfif";break;case"облачно с прояснениями":t="assets/images/weather/cloudy/scattered_clouds_night.jpg";break;case"небольшой дождь":t="assets/images/weather/rain/rain.jfif";break;case"дождь":t="assets/images/weather/rain/heavy_rain_night.jfif";break;case"ясно":t="assets/images/weather/clear/clear_sky_night.jpg";break;case"туман":t="assets/images/weather/mist/heavy_mist_night.jfif";break;case"мгла":t="assets/images/weather/mist/mist_night_ai.jfif";break;case"снег":t="assets/images/weather/snow/snow_forrest_night.jpg";break;case"небольшой снег":t="assets/images/weather/snow/frozen.jpg";break;case"метель":t="assets/images/weather/snow/frozen.jfif";break;default:t="assets/images/weather/default_night_spice.jfif"}else switch(r){case"пасмурно":t="assets/images/weather/cloudy/scattered_clouds_day.jpg";break;case"переменная облачность":t="assets/images/weather/clear/clouds_sunny.jpg";break;case"небольшая облачность":t="assets/images/weather/clear/few_clouds_day.jpg";break;case"облачно с прояснениями":t="assets/images/weather/clear/clouds_sunny.jpg";break;case"небольшой дождь":t="assets/images/weather/rain/heavy_rain_day.jfif";break;case"дождь":t="assets/images/weather/rain/small_rain2.jfif";break;case"ясно":t="assets/images/weather/clear/few_clouds_day.jpg";break;case"туман":t="assets/images/weather/mist/misty_day.jfif";break;case"мгла":t="assets/images/weather/mist/big_mist_forrest_day.jfif";break;case"снег":t="assets/images/weather/snow/snow_forrest_night.jfif";break;case"небольшой снег":t="assets/images/weather/snow/frozen.jpg";break;case"метель":t="assets/images/weather/snow/frozen.jfif";break;default:t="assets/images/weather/default_day.jpg"}n.style.backgroundImage=`url('${t}')`,n.style.backgroundSize="cover",n.style.backgroundRepeat="no-repeat"}catch(s){console.error("Ошибка при обновлении фона:",s.message)}}function u(e){c.textContent=e,c.style.display="block",v.style.display="none",x.style.display="none"}function K(){c.style.display="none"}const _=document.querySelector(".sw-1"),C=document.querySelector(".block-clothes--button-box"),j=document.querySelector(".sw-2"),D=770;$();async function $(){try{const e=await document.body.clientWidth;console.log("screen width: "+e),e>D?(console.log("desktop version, no wrap"),C.style.display="flex",_.style.display="block",j.style.display="none"):(console.log("mobile version, wrap: true"),C.style.display="none",_.style.display="none",j.style.display="flex")}catch(e){console.error("ошибка в определении ширины",e)}}async function d(e){$();try{let s;if(e){const{latitude:n,longitude:t}=e;s=`https://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${t}&lang=ru&appid=${b}&units=metric`}else{const n=i.value.trim();if(/^\d+$/.test(n)){u("Введите корректное название города");return}else s=`https://api.openweathermap.org/data/2.5/weather?q=${n}&lang=ru&appid=${b}&units=metric`,i.value=""}K();const r=await fetch(s);if(!r.ok)throw new Error("Ошибка получения данных о погоде");const o=await r.json();if(o.cod&&o.cod!==200){u(`Ошибка: ${o.message}`);return}return console.log(o),console.log("Получены данные о погоде:",o.main.temp),o}catch(s){console.error("Ошибка получения данных о погоде:",s.message),u("Произошла ошибка. Пожалуйста, попробуйте еще раз.")}}const E=(e,s)=>Math.floor(Math.random()*(s-e+1)+e),I=["cold","cup","mittens","skates","skates_2","snow-winter"],H=["sunglasses","sunglasses_2","spf","hot"];async function J(){try{const e=await w(),s=i.value.trim(),r=await d(s||e);let o=parseInt(r.main.temp);const t=parseInt(y.textContent)||o;if(t<=0){const a=E(0,I.length);return I[a]}else if(t>0){const a=E(0,H.length);return H[a]}}catch{return}}async function Q(){try{const e=await J();if(e===void 0)return;const r=await(await fetch(`http://localhost:3000/gifs/get_by_name?name=${e}`)).blob(),o=URL.createObjectURL(r),n=document.createElement("img");return n.src=o,n.classList.add("container_block-3__gif"),n}catch(e){console.log("Ошибка получения gif:",e)}}function V(e){const s=document.querySelector("#gif");s.innerHTML="",s.appendChild(e)}async function F(){const e=await Q();e!==void 0&&V(e)}document.addEventListener("DOMContentLoaded",async function(){F()});new Swiper(".mySwiper-mobile",{effect:"cards",grabCursor:!0,loop:!0,slideClass:"swiper-slide-mobile",wrapperClass:"swiper-wrapper-mobile"});const X=document.querySelector(".pack-light"),Y=document.querySelector(".pack-warm"),S=["2.jpg","3.jpg"],Z="assets/images/clothes/solomat-test/0-15/",ee="assets/images/clothes/solomat-test/minus15-0/",se="assets/images/clothes/solomat-test/15-25/";function f(e){X.src=e+S[0],Y.src=e+S[1]}function te(e){e=Math.round(e);let s="";return e<0&&(s="winter"),e>-1&&e<15&&(s="demi"),e>14&&(s="summer"),console.log("Season: "+s+";  --temp rounded: "+e),s}async function oe(){let e=+localStorage.getItem("test-temp");return Math.round(e)}async function L(e){try{let s=await oe();switch(console.log("=====  Swiper-mobile module: ====="),console.log("new data: feels like === "+e+"--- "+typeof e+".-- and from LS:  "+s),te(e)){case"winter":console.log("winter pack: -1 and below"),f(ee);break;case"demi":console.log("demi pack: 0 .. +15"),f(Z);break;case"summer":console.log("summer pack: +15 and upper"),f(se);break}console.log("-----  Swiper-mobile module END -----")}catch(s){console.error("что то не так по данным получения температуры:",s)}}document.addEventListener("DOMContentLoaded",function(){i.addEventListener("keydown",function(o){o.key==="Enter"&&e()});async function e(){try{const o=i.value.trim();if(!o){console.error("Введите название города");return}const n=await d(null,o);s(n),F(),localStorage.setItem("test-temp",n.main.temp),localStorage.setItem("test",2),L(n.main.feels_like)}catch(o){console.error("Ошибка при получении данных о погоде:",o)}}function s(o){o?(W.textContent=`${o.name}`,y.textContent=`${Math.round(o.main.temp)}°C`,P.textContent=`Мин ${Math.round(o.main.temp_min)}°C `,N.textContent=` Макс ${Math.round(o.main.temp_max)}°C`,z.textContent=` ${Math.round(o.main.feels_like)}°C`,A.textContent=`${o.weather[0].description} `,G.src=`https://openweathermap.org/img/w/${o.weather[0].icon}.png`,R(o.wind.deg,o.wind.speed),k(o),c.style.display="none"):(console.error("Ошибка получения данных о погоде: неверный формат данных",o),v.style.display="none",x.style.display="none",c.style.display="block")}r();async function r(){try{const o=await w(),n=await d(o);k(n),s(n),localStorage.setItem("test-temp",n.main.temp),localStorage.setItem("test",3),L(n.main.feels_like)}catch(o){console.error("Ошибка инициализации приложения о погоде:",o)}}});const B=document.querySelector(".imHot");console.log(B);const ne=document.querySelector(".imIce"),m=document.querySelector(".swiper-wrapper"),h=document.querySelector(".clothes-error");let M;B.addEventListener("click",()=>q("hot"));ne.addEventListener("click",()=>q("cold"));document.addEventListener("keydown",function(e){e.key==="Enter"&&re()});function re(){m.innerHTML=""}async function q(e){try{const s=await w(),r=await d(s);let o=parseInt(r.main.temp);M=parseInt(y.textContent)||o;const t=ae(e,M);ie(t)}catch(s){console.error("Произошла ошибка при получении температуры:",s.message),h.style.display="block",h.innerHTML="Для просмотра рекомендаций Вам необходимо проверить погоду в интересующем вас городе :) "}}function ae(e,s){const r=["./assets/images/clothes/pics-slider-desctop/0-15/forHot/1.png","./assets/images/clothes/pics-slider-desctop/0-15/forHot/2.png","./assets/images/clothes/pics-slider-desctop/0-15/forHot/3.png","./assets/images/clothes/pics-slider-desctop/0-15/forHot/4.png"],o=["./assets/images/clothes/pics-slider-desctop/0-15/forCold/1.png","./assets/images/clothes/pics-slider-desctop/0-15/forCold/2.jpg","./assets/images/clothes/pics-slider-desctop/0-15/forCold/3.png","./assets/images/clothes/pics-slider-desctop/0-15/forCold/4.png"],n=["./assets/images/clothes/pics-slider-desctop/more+15/forHot/1.png","./assets/images/clothes/pics-slider-desctop/more+15/forHot/2.png","./assets/images/clothes/pics-slider-desctop/more+15/forHot/3.png","./assets/images/clothes/pics-slider-desctop/more+15/forHot/4.png"],t=["./assets/images/clothes/pics-slider-desctop/more+15/forCold/1.png","./assets/images/clothes/pics-slider-desctop/more+15/forCold/2.png","./assets/images/clothes/pics-slider-desctop/more+15/forCold/3.png","./assets/images/clothes/pics-slider-desctop/more+15/forCold/4.png"],a=["./assets/images/clothes/pics-slider-desctop/-14-0/forHot/1.png","./assets/images/clothes/pics-slider-desctop/-14-0/forHot/2.png","./assets/images/clothes/pics-slider-desctop/-14-0/forHot/3.png","./assets/images/clothes/pics-slider-desctop/-14-0/forHot/4.png","./assets/images/clothes/pics-slider-desctop/-14-0/forHot/5.png"],l=["./assets/images/clothes/pics-slider-desctop/-14-0/forCold/1.png","./assets/images/clothes/pics-slider-desctop/-14-0/forCold/2.png","./assets/images/clothes/pics-slider-desctop/-14-0/forCold/3.png","./assets/images/clothes/pics-slider-desctop/-14-0/forCold/4.png"],p=["./assets/images/clothes/pics-slider-desctop/less-15/forHot/1.png","./assets/images/clothes/pics-slider-desctop/less-15/forHot/2.jpg","./assets/images/clothes/pics-slider-desctop/less-15/forHot/3.png","./assets/images/clothes/pics-slider-desctop/less-15/forHot/4.png"],g=["./assets/images/clothes/pics-slider-desctop/less-15/forCold/1.jpg","./assets/images/clothes/pics-slider-desctop/less-15/forCold/2.png","./assets/images/clothes/pics-slider-desctop/less-15/forCold/3.jpg","./assets/images/clothes/pics-slider-desctop/less-15/forCold/4.png"];if(e==="hot"){if(s>=0&&s<=15)return r;if(s>15)return n;if(s<=-1&&s>-15)return a;if(s<=-16)return p}else if(e==="cold"){if(s>=0&&s<=15)return o;if(s>15)return t;if(s<=-1&&s>-15)return l;if(s<=-16)return g}}function ie(e){m.innerHTML="",e.forEach(s=>{ce(s)}),e.length===0&&(m.style.display="none")}function ce(e){h.style.display="none";const s=document.createElement("div"),r=document.createElement("img");s.classList.add("swiper-slide"),r.src=e,s.appendChild(r),m.appendChild(s)}
